#:kivy 2.3.0


<CustomDropDown>:
    size_hint_y: None
    size_hint_x: None
    width: 100
    height: 60
    Button:
        text: 'My first Item'
        size_hint_y: None
        height: 44
        on_release: root.select(self.text)
    Button:
        text: 'My first and half Item'
        size_hint_y: None
        height: 44
        on_release: root.select(self.text)
    Button:
        text: 'My second Item'
        size_hint_y: None
        height: 44
        on_release: root.select(self.text)


# ------------- CONTENT -------------
<Content>:
    # [padding_left, padding_top, padding_right, padding_bottom], [padding_horizontal, padding_vertical] or [padding]
    padding: [15]

    AnchorLayout:
        anchor_x: 'center'
        anchor_y: 'center'

        BoxLayout:
            orientation: 'vertical'
            size_hint: 1 , 1
            size_hint_min_x: 530
            size_hint_min_y: 430
            size_hint_max_x: 900
            size_hint_max_y: 1300
            spacing: 15

            StackLayout:
                orientation: 'lr-tb'
                size_hint_y: .85
                size_hint_x: 1
                spacing: 10
                padding: [15,15]

                canvas.before:
                    Color:
                        rgba: .15, .15, .15, .3
                    Rectangle:
                        pos: self.pos
                        size: self.size

                AnchorLayout:
                    anchor_y: 'center'
                    anchor_x: 'center'
                    size_hint_y: .1
                    size_hint_min_y: 60
                    size_hint_max_y: 100

                    size_hint_x: 1

                    BoxLayout:
                        size_hint_y: None
                        size_hint_x: 1
                        height: 60
                        padding: [0,0]
                        spacing: 10
                        # for debugging
                        #canvas.before:
                        #    Color:
                        #        rgba: 0, 1, 0, .3
                        #    Rectangle:
                        #        pos: self.pos
                        #        size: self.size
                        ## for debugging
                        #canvas.before:
                        #    Color:
                        #        rgba: 0, 0, 1, .3
                        #    Rectangle:
                        #        pos: self.pos
                        #        size: self.size

                        AnchorLayout:
                            anchor_x: 'left'
                            anchor_y: 'center'
                            padding: [15,0]

                            Label:
                                size_hint_y: None
                                height: 60
                                text_size: self.width, None
                                text: 'Which Build Version?'

                        #Switch:
                        #    id: useExperimental
                        #    size_hint_y: None
                        #    size_hint_x: .25
                        #    active: False # gespeicherten Wert nutzen
                        #Label:
                        #    text: 'Experimental' if useExperimental.active else 'Stable'

                        ToggleButton:
                            size_hint_y: None
                            size_hint_x: .7
                            height: 60
                            group: 'useExperimental'
                            text: 'Experimental'
                        ToggleButton:
                            size_hint_y: None
                            size_hint_x: .7
                            height: 60
                            group: 'useExperimental'
                            text: 'Stable'
                            state: 'down' # gespeicherten Wert nutzen

                AnchorLayout:
                    anchor_y: 'center'
                    anchor_x: 'center'
                    size_hint_y: None
                    size_hint_x: 1
                    height: 4

                    canvas:
                        Color:
                            rgba: rgba(63, 63, 63)
                        Rectangle:
                            pos: self.x, self.center_y - 1
                            size: self.width, 2

                AnchorLayout:
                    anchor_y: 'center'
                    anchor_x: 'center'
                    size_hint_y: .1
                    size_hint_x: 1
                    size_hint_min_y: 60
                    size_hint_max_y: 100

                    BoxLayout:
                        size_hint_y: None
                        size_hint_x: 1
                        height: 60
                        padding: [0,0]
                        spacing: 10
                        id: worldChoiceContainer

                        AnchorLayout:
                            anchor_x: 'left'
                            anchor_y: 'center'
                            padding: [15,0]

                            Label:
                                size_hint_y: None
                                height: 60
                                text_size: self.width, None
                                text: 'Choose the world:'

                        Button:
                            id: dropdown_main_button
                            text: 'Choose World...'
                            size_hint_y: None
                            size_hint_x: 1.45
                            height: 60

                        ReactiveButton:
                            id: editWorldsListButton
                            size_hint_y: None
                            size_hint_x: 1.45
                            height: 60

                            Image:
                                id: edit_gif
                                source: 'res/images/icons8-bearbeiten-ezgif.com-instagif-less-white.gif'
                                center: self.parent.center
                                height: 30
                                allow_stretch: False
                                opacity: 1
                                anim_loop: 1
                                anim_delay: -1

                AnchorLayout:
                    anchor_y: 'center'
                    anchor_x: 'center'
                    size_hint_y: None
                    size_hint_x: 1
                    height: 4

                    canvas:
                        Color:
                            rgba: rgba(63, 63, 63)
                        Rectangle:
                            pos: self.x, self.center_y - 1
                            size: self.width, 2

                AnchorLayout:
                    anchor_y: 'center'
                    anchor_x: 'center'
                    size_hint_y: .7
                    size_hint_x: 1
                    size_hint_min_y: 60
                    #size_hint_max_y: 100

                    BoxLayout:
                        size_hint_y: None
                        size_hint_x: 1
                        height: 60
                        padding: [0,0]
                        spacing: 10
                        id: worldEditContainer

                AnchorLayout:
                    anchor_y: 'center'
                    anchor_x: 'center'
                    size_hint_y: None
                    size_hint_x: 1
                    height: 4

                    canvas:
                        Color:
                            rgba: rgba(63, 63, 63)
                        Rectangle:
                            pos: self.x, self.center_y - 1
                            size: self.width, 2

                AnchorLayout:
                    anchor_y: 'center'
                    anchor_x: 'center'
                    size_hint_y: .7
                    size_hint_x: 1
                    size_hint_min_y: 60
                    #size_hint_max_y: 100

                    BoxLayout:
                        size_hint_y: None
                        size_hint_x: 1
                        height: 60
                        padding: [0,0]
                        spacing: 10

                        DirSelectDialog:



            BoxLayout:
                size_hint_y: .15
                size_hint_x: 1
                size_hint_min_y: 100
                size_hint_max_y: 150
                #padding: [0,0]
                #padding: [1,1]
                padding: [2,2]
                #padding: [4,4]

                Button:
                    id: launch_button

                    background_normal: ''
                    background_down: ''
                    background_disabled_down: ''
                    background_disabled_normal: ''
                    background_color: rgba(229, 148, 69) # from ingame screenshot
                    outline_color: .2, .2, .2, 0
                    outline_width: 4
                    font_size: 48
                    line_height: 1.2
                    font_name: 'res/fonts/Satisfontory_v1.5.ttf'
                    size: self.size
                    text: 'Launch'

                    on_press: launch_button.background_color = rgba(193, 94, 0) # Press state color
                    on_release: launch_button.background_color = rgba(229, 148, 69) # Normal state color, but is a single click launch


                    # vielleicht erst durch code machen, dann kann ich das je nach aktuellem zustand ändern lassen
                    on_press: launch_button.text = ''
                    on_press: launch_button.disabled = True

                    # das hier für: - ist schon irgendwo sichtbar und angehalten und wird bei laden gestartet.
                    on_press: working_gif.anim_delay = 1/60
                    on_press: working_gif._coreimage.anim_reset(True)
                    on_press: working_gif.opacity = 1

                    # ideen:
                    #  - ist schon irgendwo sichtbar und angehalten und wird bei laden gestartet.
                    #  - ist irgendwo ist ein anderes symbol sichtbar und wird bei laden mit gif ersetzt.
                    #  - ist nirgends sichtbar und wird bei laden sichtbar.
                    Image:
                        id: working_gif
                        source: 'res/images/Infinity@1x-25.0s-200px-200px_grey.gif'
                        center: self.parent.center
                        size: 150, 150
                        allow_stretch: False
                        opacity: 0
                        anim_delay: -1

#BoxLayout:
#    orientation: 'vertical'
#
#    BoxLayout:
#        size_hint_y: None
#        height: sp(52)
#
#        Button:
#            text: 'Icon View'
#            on_press: fc.view_mode = 'icon'
#        Button:
#            text: 'List View'
#            on_press: fc.view_mode = 'list'
#
#    FileChooser:
#        id: fc
#        FileChooserListLayout
#        FileChooserIconLayout
